<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Softshake : Performance du SI</title>

		<meta name="description" content="Performance du SI">
		<meta name="author" content="Cyril Picat">
		<meta name="author" content="Marc Bojoly">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/octo.css" id="theme">
		
		<link rel="stylesheet" href="css/bootstrap.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		
		<!-- override default black borders for images -->
		<style>
		
			.reveal section img {
				border: none;
		  		box-shadow: 0 0 0 rgba(0, 0, 0, 0); 
			}

		</style>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<!-- CONTEXTE -->	
				<section data-background="images/context/DSCN7614.jpg" style="background: rgba(255,255,255,0.9)">
					Autant attendre la mise en production...
				</section>
				<section>
					<h3>Le projet : migration d'une banque vers une nouvelle plateforme titres</h3>
					<img src="images/context/application_architecture.png" />
				</section>
				<!-- TODO: replace image instead of changing slide -->
				<section>
					<h3>Le projet : migration d'une banque vers une nouvelle plateforme titres</h3>
					<img src="images/context/application_architecture_technos.png" />
				</section>
				<section>
					<h3>Quelques chiffres</h3>
					<p class="fragment">Clients : <strong>x10</strong></p>
					<p class="fragment">Portefeuilles titres : <strong>x5</strong></p>
					<p class="fragment">Positions : <strong>x3</strong></p>
					<p class="fragment">Titres : <strong>+50%</strong></p>
					<p class="fragment">Ordres de Bourse : <strong>x2</strong></p>
					<p class="fragment">et les effets indirects : opérations sur titres etc.</p>
				</section>
				
				<!-- FACT2 -->	
				<section data-background="images/fact2/priorities_sign.jpg" style="background: rgba(255,255,255,0.9)">
					Savoir fixer ses priorités
				</section>
				<section>
					<h3>Il faut "cadrer" le chantier</h3>
					<p class="fragment">Avoir une vue précise des volumes existants et cibles</p>
					<p class="fragment">Lister les problèmes existants</p>
					<p class="fragment">Brainstormer sur les problèmes potentiels</p>
				</section>
				<!-- TODO: replace paragraph instead of changing slide -->
				<section>
					<div style="width: 50%; height: 100%; float: left">
						<img src="images/fact2/vertiginous3.jpg" />
					</div>
					<h3>Les problèmes peuvent sembler vertigineux</h3>
					<p class="fragment">Ne pas se perdre dans les détails, ne pas aborder les solutions</p>
					<p class="fragment">Préférer l'exhaustivité à la précision</p>
					<p class="fragment">Timeboxer !</p>
					<aside class="notes">
						Volume d'ordres, nombre de clients, nombre d'utilisateurs concurrents, 
						capacité à comptabiliser avant la clôture comptable, durée de la nuit batch,
						impact sur les temps de réponse, latence réseau etc.
					</aside>
 		       	</section>
				<section>
					<h3>Comment y parvenir ?</h3>
					<p class="fragment">Entretiens utilisateurs</p>
					<p class="fragment">Entretiens IT</p>
					<p class="fragment">Problèmes existants vs problèmes potentiels</p>
				</section>
 		       	<section>
					<div style="width: 60%; float: left; margin-left:-40px; margin-top:120px; margin-right:20px;">
						<img src="images/fact2/application_architecture_risks.png" />
					</div>
					<div style="width: 40%; float: right; font-size: 0.80em;" >
						<h3>Les problèmes "usuels"</h3>
						<ol>
							<li><strong>Capacité</strong> en terme de nombre de transactions/jour</li>
							<li>Augmentation de <strong>volumétrie</strong> (x2)</li>
							<li><strong>SLA</strong> temps de réponse end-to-end</li>
							<li>Lenteurs <strong>actuelles</strong></li>
							<li>Augmentation du <strong>nombre d'utilisateurs</strong></li>
							<li>Impact sur la <strong>durée des batchs</strong></li>
							<li><strong>Latence et temps de réponse</strong> pour les utilisateurs distants</li>							
						</ol>
					</div>
					<aside class="notes">
						Capacité du HUB actuel de doubler le nombre de transactions/jour
						Capacité à gérer des OST avec 15000 clients en position
						SLA de 5 secondes sur les actions en end-to-end
						Lenteurs actuelles sur les ordres sur fonds
						Ouverture de l'application à 1000 utilisateurs front-office
						Doublement du nombre d'utilisateurs front-office
						Impact de l'augmentation du nombre de titres sur la durée des batchs
						Latence et temps de réponse pour les utilisateurs distants
					</aside>
				</section>
				<section>
					<h3>Et ensuite ?</h3>
					<h3>Construire un plan</h3>
					<p class="fragment">La carte vous aide à visualiser et à prioriser, elle ne "résout" pas les problèmes</p>
					<p class="fragment">La réponse à chaque problème pourra (devra) être complètement différente !</p>
					<p class="fragment">Chaque problème reste complexe et lié au reste du SI</p>
				</section>
				<section>
					<h3>Diviser pour mieux régner</h3>
					<p>2 patterns</p>
					<ul>
						<li class="fragment">Diviser/découpler : passer d'un test de N systèmes à un test de k&lt;N systèmes (idéalement 1)</li>
						<li class="fragment">Simplifier : réduire la dimensionnalité (cas de tests, données)</li>
					</ul>
				</section>
				<section>
					<h3>Diviser/découpler : un exemple</h3>
					<img src="images/fact2/divide-and-conquer.png" />	
				</section>
				<!-- TODO: replace image instead of changing slide -->
				<section>
					<h3>Diviser/découpler : un exemple</h3>
					<img src="images/fact2/divide-and-conquer-2.png" />										
				</section>
				<section>
					<h3>Diviser/découpler : généralisons !</h3>
					<img height="500px" src="images/fact2/divide-and-conquer-3.png" />										
				</section>
				<!-- TODO: replace image instead of changing slide -->
				<section>
					<h3>Diviser/découpler : généralisons !</h3>
					<img height="500px" src="images/fact2/divide-and-conquer-4.png" />										
				</section>
				<section>
					<h3>Simplifier : des exemples</h3>
					<p class="fragment">Ne pas tester tous les cas fonctionnels</p>
					<p class="fragment">Uniquement simuler les actions principales de l'utilisateur</p>
					<p class="fragment">Faire le test de charge avec des données existantes</p>
					<p class="fragment">Utiliser un jeu de données restreint pour les tests</p>
					<p class="fragment">! Attention, certaines simplifications seront fausses. Il faut penser à <strong>documenter les hypothèses</strong> faîtes !</p>					
				</section>
				<section>
					<h3>Et maintenant ?</h3>
					<p>Le problème est isolé et simplifié, comment je le résous ?</p>
					<p  class="fragment">Ne prévoyez pas un test de charge pour tous les problèmes !</p>
				</section>
				<section>
					<h3>Restez pragmatique !</h3>
					<ul>
						<li class="fragment">Analyse de l'existant</li>
						<li class="fragment">Modélisation et extrapolation</li>
						<li class="fragment">Test de l'existant</li>
						<li class="fragment">Test de la cible</li>
						<li class="fragment">Test end-to-end intégré de la cible</li>
					</ul>
					<img class="fragment" height="250px" src="images/fact2/arrow.png" style="float:left; margin-left:150px;"/>
					<br/>
					<br/>
					<p class="fragment">! Certains problèmes devront passer par plusieurs étapes, afin de limiter le risque !</p>					
					<p class="fragment">Ne pas sautez les étapes !</p>					
				</section>
				<section>
					<h3>Où pouvez-vous vous "planter" ?</h3>
					<p>Rappel : vous ne pourrez pas garantir à 100% la performance</p>
					<div class="fragment"> 
						<p>Vous pouvez vous planter car :</p>
						<ul>
							<li>un risque est passé à travers le brainstorming</li>
							<li>une simplification était trop "simpliste"</li>
						</ul>
					</div>
					<div class="fragment"> 
						<p>D'expérience, les mauvaises décisions étaient dues à :</p>					
						<ul>
							<li>une mauvaise connaissance de la performance existante</li>
							<li>une mauvaise connaissance des usages existants</li>
						</ul>
					</div>
				</section>

				<!-- FACT4 -->	
				<section data-background="images/fact4/tests-end-to-end.jpg" style="background: rgba(255,255,255,0.9)">
					Comment (quand même) tester en end-to-end ?
				</section>
				<section>
					<p>Les tests end-to-end sont obligatoires car certains résultats (cf. PoC) peuvent défier l'intuition</p>
					<div class="fragment">
						<h3 >Disclaimer</h3>
						<p>Les tests end-to-end sont complexes. Ceci ne se veut pas une méthode systémique mais un inventaire
						d'outils à disposition, ainsi qu'un REX sur leur efficacité</p>
					</div>
				</section>				
				<section>
					<h3>Outil #1 : Analyse de la production existante</h3>
					<p class="fragment">Analyse des latences entre systèmes</p>
					<p class="fragment">Identification du goulet d'étranglement</p>
					<p class="fragment">Découverte des problèmes de design</p>
					<p class="fragment">Évaluation de la capacité du système</p>
				</section>				
				<section>
					<h3>Outil #1 : Analyse de la production existante</h3>
					<p>Exemple de l'évaluation de la capacité du système</p>
					<img src="images/fact4/order-throughput.png" />
				</section>				
				<section>
					<h3>Outil #1 : mon REX</h3>
					<p class="fragment">Souvent faîte trop tard...</p>
					<p class="fragment">Dur à vendre, pourtant ROI elevé</p>
					<p class="fragment">Commencez petit...</p>
					<p class="fragment">Attention à la répartition de la charge !</p>
				</section>				
				<section>
					<h3>Outil #1 : attention aux chiffres !</h3>
					<!-- TODO add image comparison -->
				</section>				
				<section>
					<h3>Outil #1 : attention aux chiffres !</h3>
					<!-- TODO add image comparison -->
				</section>				
				<section>
					<h3>Outil #2 : Benchmark unitaire</h3>
					<p><em>Définition : mesure de la réponse à une transaction unitaire</em></p>
				</section>				
				<section>
					<h3>Outil #2 : Benchmark unitaire</h3>
					<p>Exemple d'analyse</p>					
					<img height="200px" src="images/fact4/response-time.png" />
					<div class="fragment">
						<p>Une représentation en "flame graph" est également adaptée</p>
						<img height="150px" src="images/fact4/flame-graph.png" />
					</div>
				</section>		
				<section>
					<h3>Outil #2 : mon REX</h3>
					<p class="fragment">La plupart des problèmes de design apparaissent en unitaire</p>
					<p class="fragment">Faîtes-en plusieurs...</p>
					<p class="fragment">Attention à ne pas faire de test de charge avant !</p>
					<p class="fragment">S'il ne faut en garder qu'un, gardez celui-ci !</p>
				</section>										
					<aside class="notes">
						Ex. problème GTX
						Parallèle avec test d'un seul système
					</aside>				
				<section>
					<h3>Outil #3 : le Dirac</h3>
					<img height="400px" src="images/fact4/dirac.png" />
					<aside class="notes">
						Peak de N transactions
						ou 1 transaction sur un gros volume
					</aside>
				</section>				
				<section>
					<h3>Outil #3 : le Dirac</h3>
					<p>Exemple d'analyse</p>					
					<img height="400px" src="images/fact4/dirac-example.png" />
				</section>
				<section>
					<h3>Outil #3 : mon REX</h3>
					<p class="fragment">Le complément parfait du test unitaire</p>
					<p class="fragment">Plus simple à analyser qu'une journée de production</p>
					<p class="fragment">Teste également la robustesse du système</p>
					<p class="fragment">Greffez-vous sur les tests fonctionnels !</p>
				</section>										
				<section>
					<h3>Outil #4 : "rejeu" d'une journée de production</h3>
					<img height="500px" src="images/fact4/replay-production.png" />
					<p style="position: absolute; top:450px; left: 200px; height:50px; width:600px; font-size:1.5em; color:blue;" class="fragment">simplifiée bien sûr !</p>
				</section>				
				<section>
					<h3>Outil #4 : mon REX</h3>
					<p class="fragment">Difficile à analyser, notamment les écarts</p>
					<p class="fragment">Difficile à interpréter</p>
					<p class="fragment">En dernier, en impliquant le support métier</p>
				</section>
				<section>
					<h3>Outil #1 et #4 : retour aux bases</h3>
					<p class="fragment">La décomposition en unitaire et Dirac simplifie grandement l'analyse</p>
				</section>				
				<section>
					<h3>Outil #5 : mettre en production</h3>
					<p class="fragment">Tout ce qui peut être mis en production par avance doit l'être</p>
					<p class="fragment">Pensez votre stratégie de migration pour monter en charge progressivement</p>
					<p class="fragment">Inspirez vous des Géants du Web (feature flipping, dark launch, canary)</p>
				</section>
				<section>
					<h3>Que faut-il mesurer ?</h3>
					<!-- TODO -->
					<p class="fragment">Temps entrée / sortie de chaque système</p>
					<p class="fragment">NMON (incl. TOP)</p>
					<p class="fragment">à complèter si nécessaire...</p>
				</section>
				<section>
					<h3>Que faut-il analyser ?</h3>
					<!-- TODO -->
					<img />
					<p>Throughput, temps de réponse/charge</p>
					<aside class="notes">
						Analyse auto
						Sur HW juste sanity check (TOP, CPU, RAM)
					</aside>
				</section>
				<section>
					<h3>Quel outillage ?</h3>
					<!-- TODO -->
					<p class="fragment">Python, Pandas, Sikuli???</p>
				</section>
				<section>
					<h3>Peut-on extrapoler (à la production) ?</h3>
					<p class="fragment">Beaucoup d'extrapolations différentes possibles</p>
					<p class="fragment">Environnement, concurrence, simplifications...</p>
					<p class="fragment">Mon expérience : OUI (sauf le sizing machine)</p>
					<p class="fragment">mais attention de rester "linéaire" dans vos tests !</p>					
				</section>
				<section>
					<h3>Où pouvez-vous vous "planter" ?</h3>
					<p>Rappel : vous ne pourrez pas garantir à 100% la performance</p>
					<ul>
						<li class="fragment">si vous ne faîtes pas assez d'unitaire</li>
						<li class="fragment">si votre approche n'est pas assez "data-driven"</li>
						<li class="fragment">si vous n'avez pas assez simplifié / découplé</li>
					</ul>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				slideNumber: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
